# pr_cross
Семестровый проект УВМ. Разработка кроссплатформенных программных систем.
# Ассемблер и интерпретатор для УВМ (вариант 23)

## Общее описание

Проект представляет собой ассемблер и интерпретатор для учебной виртуальной машины (УВМ). Ассемблер преобразует текстовое представление программы в бинарный формат, понятный УВМ. Интерпретатор выполняет скомпилированные программы.

## Спецификация языка ассемблера

### Формат команд

### Мнемоники

1. **`const значение`** - Загрузка константы на стек
   - `значение`: 16-битная константа (0-65535)
   - Пример: `const 125`, `const 0x7D`, `const 0b1111101`

2. **`load адрес`** - Чтение значения из памяти
   - `адрес`: 24-битный адрес (0-16777215)
   - Пример: `load 558`, `load 0x22E`

3. **`store`** - Запись значения в память
   - Без аргументов
   - Пример: `store`

4. **`bitrev`** - Унарная операция обращения битов
   - Без аргументов
   - Пример: `bitrev`

### Форматы чисел

- Десятичные: `125`
- Шестнадцатеричные: `0x7D`, `0x7d`
- Двоичные: `0b1111101`
- Восьмеричные: `0o175`

### Метки

- Метка определяется именем, заканчивающимся двоеточием
- Можно использовать в аргументах команд `const` и `load`
- Пример:
start:
const 100
load start ; Загрузит адрес метки start

### Комментарии

- Однострочные комментарии начинаются с `;`
- Пример: `const 42 ; Загрузка ответа на все вопросы`

## Описание функций и настроек

### assembler.py

Основной модуль ассемблера. Содержит класс `Assembler` со следующими методами:

- `parse_line(line)` - разбор строки ассемблерного кода
- `assemble(source)` - ассемблирование исходного текста
- `encode_instruction(cmd)` - кодирование команды в бинарный вид
- `to_binary(program)` - преобразование всей программы
- `format_intermediate(program)` - форматирование промежуточного представления

### Поддерживаемые режимы работы

1. **Обычный режим**: преобразование .asm файла в .bin файл
2. **Режим тестирования**: вывод промежуточного представления программы

## Команды для сборки и запуска тестов

### Требования

- Python 3.6 или выше
- Стандартные библиотеки Python (struct, enum, typing)

### Основные команды

```bash
# Ассемблирование программы
python assembler.py input.asm output.bin

# Ассемблирование с выводом промежуточного представления
python assembler.py input.asm output.bin --test

# Запуск тестов из спецификации
python run_tests.py

# Запуск тестовой программы
python assembler.py test_program.asm test.bin --test
